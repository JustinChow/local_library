<%- include('./header') %> 
<%- include('./sidebar') %>

<div class="col-sm-10">
    <h1><%= title %>: <%= author.name %></h1>
    <p><%= author.lifespan %></p>

    <% if (author_books.length) { %>
        <p><strong>Delete the following books before attempting to delete this author.</strong></p>
        <div style='margin-left:20px;margin-top:20px'>
            <h4>Books</h4>

            <dl>
                <% for( let i = 0; i < author_books.length; i++ ) { %>
                    <dt>
                        <a href='<%= author_books[i].url %>'><%= author_books[i].title %></a> 
                    </dt>
                    <dd><%= author_books[i].summary %></dd>
                <% } %>
            </dl>
        </div>
    <% } else { %>
        <p>Do you really want to delete this author?</p>

        <form method='POST' action=''>
            <div class='form-group'>
                <input id='authorid' class='form-control' type='hidden'
                    name='authorid' required='true' value='<%= author._id %>'>
            </div>

            <button class='btn btn-primary' type='submit'>Delete</button>
        </form>

    <% } %>
    

</div>

<%- include('./footer') %>